# 大乐透高级混合分析预测系统

## 🎯 系统概述

基于真实历史数据的大乐透号码预测系统，整合了**7种数学模型**的综合预测框架：

- 📊 **统计学分析** (权重: 10%) - 基于描述性统计和推断统计
- 🎲 **概率论分析** (权重: 10%) - 基于概率分布和信息论
- 🔗 **马尔可夫链分析** (权重: 30%) - 基于状态转移概率（最高权重）
- 🧮 **贝叶斯分析** (权重: 20%) - 基于先验和后验概率（第二高权重）
- 🌡️ **冷热号分析** (权重: 10%) - 基于时间序列热度指数
- 🔄 **周期性分析** (权重: 10%) - 基于FFT频域和自相关分析
- 🔍 **相关性分析** (权重: 10%) - 基于PCA主成分分析

## 🚀 快速开始

### 1. 安装依赖
```bash
pip3 install -r requirements.txt
```

### 2. 获取数据
```bash
# 获取最新数据（推荐）
python3 dlt_analyzer.py crawl --count 200
```

### 3. 高级混合分析预测

#### 🎯 最推荐：使用高级混合分析器
```bash
# 预测1注最稳定的号码
python3 advanced_hybrid_analyzer.py -p 100 -c 1 --explain

# 快速预测3注
python3 hybrid_predictor.py --quick -c 3

# 预测最稳定的1注
python3 hybrid_predictor.py --stable -p 150

# 详细分析模式
python3 hybrid_predictor.py --detail -p 100 -c 5
```

## 📊 核心功能

### 高级混合分析器 (advanced_hybrid_analyzer.py) ⭐推荐

**特点：**
- 🔬 7种数学模型并行分析
- 📈 权重分配优化（马尔可夫链25%最高权重）
- 🎯 多注预测差异化策略
- 💾 完整分析过程保存

**使用方法：**
```bash
# 基础用法
python3 advanced_hybrid_analyzer.py -d data/dlt_data_all.csv -p 100 -c 1 --explain

# 参数说明
-d, --data      数据文件路径
-p, --periods   分析期数 (建议30-200期)
-c, --count     预测注数 (1-10注)
--explain       显示详细分析过程
```

### 简化预测器 (hybrid_predictor.py) ⭐易用

**特点：**
- 🚀 简化的命令行接口
- 🎯 预设的预测模式
- 📝 格式化的结果输出

**使用方法：**
```bash
# 快速预测模式
python3 hybrid_predictor.py --quick -c 5

# 最稳定预测
python3 hybrid_predictor.py --stable -p 150

# 详细分析模式
python3 hybrid_predictor.py --detail -p 100 -c 3
```

## 🔬 数学模型详解

### 1. 统计学分析模块 (15%)
- **和值统计特征**：均值、标准差、偏度、峰度
- **正态性检验**：D'Agostino检验、KS检验
- **评分机制**：基于目标和值的适应性评分

### 2. 概率论分析模块 (20%)
- **概率分布计算**：历史频率分析
- **卡方检验**：均匀分布假设检验
- **信息熵计算**：系统随机性度量

### 3. 马尔可夫链分析模块 (25%) 🏆
- **状态转移概率**：号码间关联性分析
- **稳定性权重**：转移次数稳定性调整
- **多层转移**：位置转移和全局转移

### 4. 贝叶斯分析模块 (15%)
- **Beta-Binomial共轭**：先验后验概率更新
- **贝叶斯因子**：证据强度评估
- **加1平滑**：避免零概率问题

### 5. 冷热号分析模块 (15%)
- **多时间窗口**：10期、20期、30期分析
- **热度指数**：实际频率/期望频率
- **中心化处理**：热度评分标准化

### 6. 周期性分析模块 (10%)
- **FFT频域分析**：主要周期识别
- **自相关分析**：时间序列相关性
- **趋势分析**：线性趋势检测

### 7. 相关性分析模块 (验证用)
- **特征工程**：9维特征向量构建
- **PCA分析**：主成分贡献率
- **特征重要性**：第一主成分权重

## 📈 预测结果示例

### 基于150期数据的最稳定预测：
```
================================================================================
🔬 高级混合分析预测系统
================================================================================
📊 分析期数: 150 期
🎯 预测注数: 1 注
📈 使用模型: 统计学、概率论、马尔可夫链、贝叶斯、冷热号、周期性、相关性

🔍 开始多模型并行分析...
📈 1. 统计学分析模块 (权重: 15%)
   📊 和值均值: 87.83
   📊 和值标准差: 22.69
   📊 分布偏度: 0.075
   📊 是否正态分布: False

🎲 2. 概率论分析模块 (权重: 20%)
   🎲 前区信息熵: 5.101
   🎲 卡方检验p值: 0.717
   🎲 分布是否均匀: True

🔗 3. 马尔可夫链分析模块 (权重: 25%)
   🔗 前区状态数: 35
   🔗 稳定状态数: 35
   🔗 稳定性比例: 100.0%

🧮 4. 贝叶斯分析模块 (权重: 15%)
   🧮 平均贝叶斯因子: 1.000
   🧮 前区观测期数: 150

🌡️ 5. 冷热号分析模块 (权重: 15%)
   🌡️ 前区热号: 4 个
   🌡️ 前区冷号: 3 个
   🌡️ 热号示例: [20, 29, 33, 34]

🔄 6. 周期性分析模块 (权重: 10%)
   🔄 前区主周期: 2.3 期
   🔄 前区趋势: 上升

🔍 7. 相关性分析模块 (验证用)
   🔍 第一主成分贡献率: 0.259
   🔍 最重要特征: 前区和值 (0.627)

🎯 最稳定预测: 前区 20 21 22 28 29 | 后区 01 10
```

### 快速预测3注示例：
```
🎯 预测结果 (3 注):
第 1 注: 前区 10 20 21 22 29 | 后区 01 10
第 2 注: 前区 08 10 21 22 29 | 后区 07 10
第 3 注: 前区 08 20 21 22 29 | 后区 01 10
```

## 📁 输出文件

### 分析结果文件
- `output/hybrid/hybrid_analysis_XXXperiods.json` - 详细分析结果
- `output/hybrid/predictions_XXXperiods.json` - 预测结果

### 文件内容
```json
{
  "timestamp": "2025-06-30T00:08:26.205501",
  "periods": 100,
  "model_weights": {
    "statistical": 0.15,
    "probability": 0.20,
    "markov": 0.25,
    "bayesian": 0.15,
    "hot_cold": 0.15,
    "cycle": 0.10,
    "correlation": 0.00
  },
  "predictions": [...]
}
```

## 🎯 使用建议

### 1. 期数选择
- **短期分析（30-50期）**：更敏感，适合捕捉近期趋势
- **中期分析（50-100期）**：平衡稳定性和敏感性（推荐）
- **长期分析（100-200期）**：更稳定，适合长期趋势

### 2. 预测策略
- **单注预测**：使用最稳定预测模式
- **多注预测**：利用差异化策略增加覆盖面
- **组合使用**：结合不同期数的预测结果

### 3. 数据更新
```bash
# 定期更新数据（建议每周）
python3 dlt_analyzer.py crawl --count 50
```

## 🔧 编程接口

```python
from hybrid_predictor import HybridPredictor

# 创建预测器
predictor = HybridPredictor("data/dlt_data_all.csv")

# 预测最稳定的1注
front_balls, back_balls = predictor.predict_stable(periods=100)

# 预测多注
predictions = predictor.predict_multiple(periods=100, count=5)

# 格式化输出
formatted = predictor.format_predictions(predictions)
```

## ⚠️ 注意事项

1. **数据质量**：确保使用真实、完整的历史数据
2. **预测准确性**：彩票具有随机性，预测结果仅供参考
3. **理性购彩**：请理性对待预测结果，适度购彩
4. **计算资源**：大期数分析需要更多计算时间

## 🔗 相关文档

- [高级混合分析技术文档.md](高级混合分析技术文档.md) - 详细技术实现
- [README.md](README.md) - 项目主文档

## 📞 免责声明

本系统仅用于技术研究和学习目的，预测结果不构成购彩建议。彩票具有随机性，请理性购彩，适度娱乐。
